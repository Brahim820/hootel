<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <!-- Tree view of hotel reservation -->
        <record model="ir.ui.view" id="view_hotel_toassign_reservation_tree">
            <field name="name">hotel.toassign.reservation.tree</field>
            <field name="model">hotel.reservation</field>
            <field name="arch" type="xml">
                <tree string="Hotel Reservation"
                decoration-muted="state == 'cancelled' and not overbooking"
                decoration-warning="overbooking"
                >
                    <button icon="fa fa-1x fa-chain-broken"
                        type="object"
                        class="oe_stat_button"
                        id="mark_readed" 
                        name="mark_as_readed"
                        attrs="{'invisible':[('to_read','=', False)]}"
                    />
                    <button icon="fa fa-1x fa-chain-broken"
                        type="object"
                        class="oe_stat_button"
                        id="splitted" 
                        name="open_master"
                        attrs="{'invisible':[('splitted','=', False)]}"
                    />
                    <field name="state" />
                    <button type="object" class="oe_stat_button"
                        id="go_folio" icon="fa fa-2x fa-file"
                        name="open_folio"
                    />
                    <field name="folio_id"/>                    
                    <field name="product_id" string="Room"/>
                    <button type="action" class="oe_stat_button"
                        id="reservations_partner" icon="fa fa-2x fa-list-ul"
                        name="%(hotel.open_hotel_reservation_form_tree_all)d"
                        context="{'search_default_partner_id': partner_id}"
                    />
                    <field name="partner_id"/>
                    <field name="splitted" invisible="1" />
                    <field name="parent_reservation" invisible="1" />
                    <field name="virtual_room_id" string="Reserved Room Type"/>                   
                    <field name="nights" />
                    <field name="adults" string="Persons"/>                    
                    <field name="checkin" widget="date"/>
                    <field name="checkout"  widget="date"/>
                    <field name="overbooking" invisible="1" />
                    <field name="to_assign" invisible="1"/>
                    <!-- cardex_smart_button attrs depends on cardex_pending to be showed -->
                    <field name="cardex_pending" invisible="1"/>                    
                    <field name="price_unit" string="Reservation Price"/>
                    <field name="discount" groups="sale.group_discount_per_so_line"/>
                    <field name="price_total" string="Final Price"/>
                    <field name="folio_pending_amount" string="Folio Pending Amount"/>
                    <button type="object" class="oe_stat_button"
                        id="cardex_smart_button" icon="fa fa-3x fa-money"
                        name="action_pay_folio"
                        attrs="{'invisible':[('folio_pending_amount','==',0)]}"
                    />                
                </tree>
            </field>
        </record>

         <!-- Action for hotel cloud reservation -->
        <record model="ir.actions.act_window" id="open_hotel_wubook_reservation_form_tree_all">
            <field name="name">Hotel Cloud Reservation</field>
            <field name="res_model">hotel.reservation</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_hotel_toassign_reservation_tree" />
            <field name="domain">[['wrid', '!=', 'none'],'|', ['to_assign', '=', true], ['to_read', '=', true]]</field>
        </record>

    </data>
</openerp>
